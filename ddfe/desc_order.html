<!DOCTYPE html>
<html>
<head>
	<title>详情描述</title>
	<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="PublicCSS/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="PublicCSS/bootstrap-theme.min.css">
    <script src="PublicJs/jquery.js"></script>
    <script src="PublicJs/http.js"></script>
    <script src="PublicJs/base64jquery.js"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
</head>
<body style="padding:8px">
	<div id="imgdiv"></div>
	<div id="quesdiv"></div>
	<div id="replydiv"></div>

<script>
var getVariableArr = getElement(); // 取get参数
var wx_questions_id = getVariableArr[0];
var requestfront = "../ddbe/api.php?";

$(document).ready(function(){
	mylist.quesdesc();
});

var mylist = {
	quesdesc : function() { 
		// 解决问题描述
		var resqurl = requestfront + "action=quesdesc";
		data = {
			wx_questions_id : wx_questions_id,
		};
		http_method.ajaxmethod(resqurl,data,"POST","json",callback.finishgetdesc);
	},
};

// 回调
var callback = {
	finishgetdesc : function(result) {
		var resp = result.resp;
		var question = resp.wx_questions;
		var imgarr = resp.wx_img;
		var replyarr = resp.wx_reply;

		// 图片
		var imgContent = "";
		for(var key in imgarr) {
			imgContent += '<img class="img-thumbnail" width="150px" height="150px" src="' + imgarr[key].wx_img_url + '" />';
			alert("DEBUG:" + imgarr[key].wx_img_url);
		}
		$("#imgdiv").html(imgContent);

		//<blockquote> 问题描述
		var quesContent = '<p><blockquote>'
		+ question.wx_questions_content
		+ '</blockquote>'
		+ '时间:' + Trans_php_time_to_str(question.wx_questions_id,1);
		+ '<br>地点:' +  question.wx_questions_place
		+ '</p>';
		$("#quesdiv").html(quesContent);

		// 回复
		/*
		<div class="panel panel-primary">
            <div class="panel-heading">
              <h3 class="panel-title">Panel title</h3>
            </div>
            <div class="panel-body">
              Panel content
            </div>
          </div>
		*/
		var replyContent = "";
		for(var key in replyarr) {
			replyContent += '<div class="panel panel-primary">'
	            +'<div class="panel-heading">'
	            +  '<h3 class="panel-title">回复日期'
	            +  Trans_php_time_to_str(replyarr[key].wx_reply_id,1)
	            +  '</h3>'
	            +'</div>'
	            +'<div class="panel-body">'
	            +  replyarr[key].wx_reply_content
	            +'</div>'
            +'</div>';
		}
		$("#replydiv").html(replyContent);
		
	},
};

</script>
</body>
</html>






